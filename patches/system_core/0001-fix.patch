From 025a4be73f0b74a38b6f12157664227a074fa342 Mon Sep 17 00:00:00 2001
From: rote66 <pontifex23872388@gmail.com>
Date: Tue, 28 Apr 2020 00:05:32 +0800
Subject: [PATCH] fix

Change-Id: I99d85faee2a8521399930c2ce237c2ffaedd5978
---
 mkbootimg/mkbootimg.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/mkbootimg/mkbootimg.c b/mkbootimg/mkbootimg.c
index 0ad9de2..d6206b8 100644
--- a/mkbootimg/mkbootimg.c
+++ b/mkbootimg/mkbootimg.c
@@ -209,7 +209,8 @@ int main(int argc, char **argv)
     hdr.cmdline[BOOT_ARGS_SIZE - 1] = '\0';
     if (cmdlen >= (BOOT_ARGS_SIZE - 1)) {
         cmdline += (BOOT_ARGS_SIZE - 1);
-        strncpy((char *)hdr.extra_cmdline, cmdline, BOOT_EXTRA_ARGS_SIZE);
+        strncpy((char *)hdr.extra_cmdline, cmdline, BOOT_EXTRA_ARGS_SIZE - 1);
+        hdr.extra_cmdline[BOOT_EXTRA_ARGS_SIZE - 1] = '\0';
     }
 
     kernel_data = load_file(kernel_fn, &hdr.kernel_size);
-- 
2.26.2

